#include "rom.h"

void testIncreasingInstructions();

/* ROM containing Immediate category */
uint8_t ROM_IMMEDIATE[15] = {
	LDA_imm, 0x02,
	LDA_imm, 0x03,
	LDA_imm, 0x04,
	/* End of instruction */
	0xFF, 0xFF, 0xFF,
	0xFF, 0xFF, 0xFF,
	0xFF, 0xFF, 0xFF
};

/* ROM containing Zero Page category */
uint8_t ROM_ZEROPAGE[15] = {
	LDA_zp, 0x20,
	STA_zp, 0x21,
	LDA_zp, 0x22,
	/* End of instructions */
	0xFF, 0xFF, 0xFF,
	0xFF, 0xFF, 0xFF,
	0xFF, 0xFF, 0xFF
};

uint8_t ROM_ABSOLUTE[15] = {
	LDA_abs, 0x40, 0x00,
	STA_abs, 0x40, 0x01,
	0xFF, 0xFF, 0xFF,
	0xFF, 0xFF, 0xFF,
	0xFF, 0xFF, 0xFF
};

/* ROM containing mixed category */
uint8_t ROM_MIXED[512] = {
	/* Setup apu to play a 440 Hz pulse */
	/* Clear apu */
	LDA_imm, 0x00,
	STA_abs, 0x13, 0x40,
	LDA_imm, 0x00,
	STA_abs, 0x12, 0x40,
	LDA_imm, 0x00,
	STA_abs, 0x11, 0x40,
	LDA_imm, 0x00,
	STA_abs, 0x10, 0x40,
	LDA_imm, 0x00,
	STA_abs, 0x0F, 0x40,
	LDA_imm, 0x00,
	STA_abs, 0x0E, 0x40,
	LDA_imm, 0x00,
	STA_abs, 0x0D, 0x40,
	LDA_imm, 0x30,
	STA_abs, 0x0C, 0x40,
	LDA_imm, 0x00,
	STA_abs, 0x0B, 0x40,
	LDA_imm, 0x00,
	STA_abs, 0x0A, 0x40,
	LDA_imm, 0x00,
	STA_abs, 0x09, 0x40,
	LDA_imm, 0x80,
	STA_abs, 0x08, 0x40,
	LDA_imm, 0x00,
	STA_abs, 0x07, 0x40,
	LDA_imm, 0x00,
	STA_abs, 0x06, 0x40,
	LDA_imm, 0x08,
	STA_abs, 0x05, 0x40,
	LDA_imm, 0x30,
	STA_abs, 0x04, 0x40,
	LDA_imm, 0x00,
	STA_abs, 0x03, 0x40,
	LDA_imm, 0x00,
	STA_abs, 0x02, 0x40,
	LDA_imm, 0x08,
	STA_abs, 0x01, 0x40,
	LDA_imm, 0x30,
	STA_abs, 0x00, 0x40,

	/* Play 50% pulse at ~440Hz */
	LDA_imm, 0x17,
	STA_abs, 0x02, 0x40,
	LDA_imm, 0x01,
	STA_abs, 0x03, 0x40,
	LDA_imm, 0xBF,
	STA_abs, 0x00, 0x40,

	/* Test simple store and load */
	LDA_imm, 0xAA,
	STA_zp, 0x20, // zero page 0x20 should now contain 0xAA
	LDA_imm, 0x55,
	STA_zp, 0x21, // zero page 0x21 should now contain 0x55
	LDA_imm, 0x66,
	STA_zp, 0x22, // zero page 0x22 should now contain 0x66

	/* Test logical operations */
	LDA_zp, 0x20,
	ORA_zp, 0x21,
	STA_zp, 0x23, // zero page 0x23 should now contain 0xFF
	LDA_zp, 0x22,
	EOR_imm, 0xFF,
	STA_zp, 0x24, // zero page 0x24 should now contain 0x99
	LDA_zp, 0x23,
	ORA_zp, 0x24,
	ORA_imm, 0x24,
	STA_zp, 0x25, // zero page 0x25 should now contain 0xBD
	STA_zp, 0x26,
	ASL_zp, 0x26, // zero page 0x26 should now contain 0x7A
	LDA_zp, 0x26,
	STA_zp, 0x27,
	ASL_zp, 0x27, // zero page 0x27 should now contain 0xF4

	/* Test arithmetic operations */
	LDA_imm, 0x00,
	ADC_imm, 0x01,
	STA_zp, 0x28, // zero page 0x28 should now contain 0x01
	ADC_zp, 0x28,
	STA_zp, 0x29, // zero page 0x29 should now contain 0x02
	ADC_zp, 0x29,
	STA_zp, 0x2A, // zero page 0x2A should now contain 0x04
	ADC_zp, 0x2A,
	STA_zp, 0x2B, // zero page 0x2B should now contain 0x08
	ADC_zp, 0x2B,
	STA_zp, 0x2C, // zero page 0x2C should now contain 0x10
	STA_zp, 0x2D,
	SBC_imm, 0x01, // zero page 0x2D should now contain 0x0F
	LDA_zp, 0x2D,
	STA_zp, 0x2E,
	SBC_imm, 0x01,
	SBC_imm, 0x01,
	SBC_imm, 0x01,
	SBC_imm, 0x01,
	SBC_imm, 0x01, // zero page 0x2E should now contain 0x0A

	/* Test APU store and loads */
	LDA_imm, 0x30,
	STA_abs, 0x00, 0x40, // 0x4000 should now contain 0x30
	LDA_imm, 0x00,
	STA_abs, 0x01, 0x40,
	STA_abs, 0x02, 0x40,
	STA_abs, 0x03, 0x40, // 0x4001-0x4003 should now contain 0x00
	LDA_abs, 0x00, 0x40,
	STA_zp, 0x2F, // zero page 0x2F should now (maybe) contain 0x30

	/* Write zp values to RAM, from address 0x8500 and up */
	LDA_zp, 0x20,
	STA_abs, 0x00, 0x85,
	LDA_zp, 0x21,
	STA_abs, 0x01, 0x85,
	LDA_zp, 0x22,
	STA_abs, 0x02, 0x85,
	LDA_zp, 0x23,
	STA_abs, 0x03, 0x85,
	LDA_zp, 0x24,
	STA_abs, 0x04, 0x85,
	LDA_zp, 0x25,
	STA_abs, 0x05, 0x85,
	LDA_zp, 0x26,
	STA_abs, 0x06, 0x85,
	LDA_zp, 0x27,
	STA_abs, 0x07, 0x85,
	LDA_zp, 0x28,
	STA_abs, 0x08, 0x85,
	LDA_zp, 0x29,
	STA_abs, 0x09, 0x85,
	LDA_zp, 0x2A,
	STA_abs, 0x0A, 0x85,
	LDA_zp, 0x2B,
	STA_abs, 0x0B, 0x85,
	LDA_zp, 0x2C,
	STA_abs, 0x0C, 0x85,
	LDA_zp, 0x2D,
	STA_abs, 0x0D, 0x85,
	LDA_zp, 0x2E,
	STA_abs, 0x0E, 0x85,
	LDA_zp, 0x2F,
	STA_abs, 0x0F, 0x85,

	/* Jump to end loop (0xFF00) */
	JMP_abs, 0x00, 0xFF,
	/* End of instructions */
	0xFF, 0xFF, 0xFF,
	0xFF, 0xFF, 0xFF,
	0xFF, 0xFF, 0xFF
};
